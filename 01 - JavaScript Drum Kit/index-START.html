<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!--Each keyboard button corresponds with a certain data-key,so this has been used here to identify that specific key.  The HTML kbd tag relates to a keyboard input.-->
  <div class="keys">
    <div data-key="65" class="key">
      <kbd>A</kbd>
      <span class="sound">clap</span>
    </div>
    <div data-key="83" class="key">
      <kbd>S</kbd>
      <span class="sound">hihat</span>
    </div>
    <div data-key="68" class="key">
      <kbd>D</kbd>
      <span class="sound">kick</span>
    </div>
    <div data-key="70" class="key">
      <kbd>F</kbd>
      <span class="sound">openhat</span>
    </div>
    <div data-key="71" class="key">
      <kbd>G</kbd>
      <span class="sound">boom</span>
    </div>
    <div data-key="72" class="key">
      <kbd>H</kbd>
      <span class="sound">ride</span>
    </div>
    <div data-key="74" class="key">
      <kbd>J</kbd>
      <span class="sound">snare</span>
    </div>
    <div data-key="75" class="key">
      <kbd>K</kbd>
      <span class="sound">tom</span>
    </div>
    <div data-key="76" class="key">
      <kbd>L</kbd>
      <span class="sound">tink</span>
    </div>
  </div>

<!-- The audio sounds also link to a specific data key.  -->
  <audio data-key="65" src="sounds/clap.wav"></audio>
  <audio data-key="83" src="sounds/hihat.wav"></audio>
  <audio data-key="68" src="sounds/kick.wav"></audio>
  <audio data-key="70" src="sounds/openhat.wav"></audio>
  <audio data-key="71" src="sounds/boom.wav"></audio>
  <audio data-key="72" src="sounds/ride.wav"></audio>
  <audio data-key="74" src="sounds/snare.wav"></audio>
  <audio data-key="75" src="sounds/tom.wav"></audio>
  <audio data-key="76" src="sounds/tink.wav"></audio>

<!--This is the JS section of the file.-->
<script>

function playSound(e) {
  const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`)
  const key = document.querySelector(`.key[data-key="${e.keyCode}"]`)
  if(!audio) return;
  audio.currentTime = 0;
  audio.play();
  key.classList.add('playing');
  }

  // The play sound function above defines a const of audio, which will pick up a corresponding sound for a specific key code, as well as a key, which picks up the divs above which have a class of key. If there is no corresponding audio sound we jump to the end of the function, but otherwise we play the audio, first setting the time to 0 so that it alaways plays from the beginning when a new key is clicked.  We add a class of 'playing' to the div which is defined in the CSS file.

  function removeTransition(e) {
    if (e.propertyName !== 'transform') return;
    console.log(e.propertyName);
    this.classList.remove('playing');
  }

  // The propertyName above returns the name of the CSS property associated with the transition when a transition event occurs.  If that propertyName is 'transform', which it would be, then we remove the class of playing and the key will go back to looking the way it was before.

  const keys = document.querySelectorAll('.key');
  keys.forEach(key => key.addEventListener('transitionend',removeTransition));

  // Here, we are looping over each of the divs with a class key, and listening for the event, 'transitionend' - this is basically referring to the transition which happens when we add the class playing, as we specifically have a transform in the 'playing' class.  So once that transition is over, we run the function above, removeTransition.

  window.addEventListener('keydown', playSound);
</script>


</body>
</html>

<!-- test -->
